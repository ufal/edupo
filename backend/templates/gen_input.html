    <script>
	function updateModelVisibility() {
		var model = document.getElementById("modelSelect").value;
		document.querySelectorAll("[data-hide-models]").forEach(el => {
			var hideModels = el.dataset.hideModels.split(",").map(s => s.trim());
			el.style.display = hideModels.includes(model) ? "none" : "";
		});
	}
    </script>
    
    <form method="post" action="gen">
        <p>Model:
        <select name="modelspec" onchange="updateModelVisibility()" id="modelSelect">
            <option value="mc">základní</option>
            <!-- <option value="tm">nový</option> -->
            <option value="new" selected>3g</option>
            <option value="gpt-4o-mini">GPT 4o mini</option>
            <option value="gpt-5-mini">GPT 5 mini</option>
            <option value="google/gemini-3-pro-preview">Gemini 3 Pro</option>
        </select>
        Základní model umí 4verší a 6verší, nový model umí lecjaké délky (ale
        neumí anafory a epanastrofy).
        Základní model je rychlejší ale horší, nový model je lepší ale
        generování mu déle trvá.
        </p>

        <p data-hide-models="mc">Autor:
            <input type="text"
               name="author"
               placeholder="Mácha, Karel Hynek"
               list=author_datalist0
               id="author"
               autofocus
        >
        <datalist id="author_datalist0">
        <option>Mácha, Karel Hynek</option>
        <option>Erben, Karel Jaromír</option>
        <option>Neruda, Jan</option>
        <option>Hálek, Vítězslav</option>
        <option>Březina, Otokar</option>
        <option>Karásek ze Lvovic, Jiří</option>
        <option>Hlaváček, Karel</option>
        <option>Gellner, František</option>
        </datalist>
        Můžete zvolit nebo vepsat autora. Pokud ponecháte nevyplněno, model náhodně zvolí autora.
        </p>

        <p data-hide-models="mc">Název: <input name="title"></p>


        <p data-hide-models="new">Metrum:
        <select name="metre">
        <option value="">náhodně</option>
        <option value="T">trochej</option>
        <option value="J">jamb</option>
        <option value="D">daktyl</option>
        <option value="N">volný</option>
        </select>
        </p>

        <p id="pocetversu" data-hide-models="tm,new">Počet veršů ve sloce:
        <input name="verses_count" id="verses_count"
            type="text" value="0">
        Typicky 4 nebo 6, ale můžete zadat vlastní hodnotu (0 znamená, že
        volbu necháte na generujícím modelu). Pokud mají mít jednotlivé sloky
        různé počty veršů, můžete zadat více hodnot oddělených mezerami (např.
        "4 4 3 3").
        </p>

        <p data-hide-models="new">
        Rýmové schéma:
        <input type="text"
               name="rhyme_scheme"
               placeholder="AABB"
               maxlength="20"
               list=rhyme_scheme_datalist0
               id="rhyme_scheme"
               autofocus
        >
        <datalist id="rhyme_scheme_datalist0">
        <option>náhodně</option>
        <option>AABB</option>
        <option>ABAB</option>
        <option>ABBA</option>
        <option>XAXA</option>
        <option>AAXX</option>
        <option>XXXX</option>
        <option>AABBCC</option>
        <option>ABABCC</option>
        <option>ABABXX</option>
        <option>XXXXXX</option>
        </datalist>
        Rýmující verše se označují
        stejným písmenem, nerýmující se verš se označuje X.
        Můžete si vybrat některé z běžných rýmových schémat, anebo vepsat
        vlastní.
        Pokud mají mít jednotlivé sloky různá schémata, můžete vepsat schámata
        pro jednotlivé sloky oddělená mezerou (např. "ABBA CDC").
        </p>
        
        <p data-hide-models="new">Počet slabik v prvním verši:
        <select name="syllables_count">
        <option value="0">náhodně</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
        <option value="7">7</option>
        <option value="8">8</option>
        <option value="9">9</option>
        <option value="10">10</option>
        <option value="11">11</option>
        <option value="12">12</option>
        <option value="13">13</option>
        <option value="14">14</option>
        <option value="15">15</option>
        <option value="16">16</option>
        </select>
        (respektive ve všech verších které mají definovaný požadavek na první slovo)
        TODO teď to tu nejde zadat ale model umí i různé počty pro různé
        verše, např. "8 7" pokud se mají střídat verše o 8 a 7 slabikách, nebo
        třeba "8 7 7 8"...
        </p>

        <!--<p>TODO rozměr (počet stop) - buď stejný pro celou báseň, nebo pro
        jednotlivé rýmy; není to nutně totéž jako počet slabik (m/f/a se liší
        počtem slabik při stejném rozměru)</p>-->

        <p data-hide-models="mc">Pevná forma:
        <select name="form">
        <option value="">ne</option>
        <option value="sonet">italský sonet</option>
        <option value="haiku">haiku</option>
        <option value="limerik">limerik</option>
        </select>
        Pokud je vybrána pevná forma, nastavení v rozporu s vybranou formou se budou ignorovat.
        </p>

        <p data-hide-models="mc,tm,gpt-4o-mini,gpt-5-mini">Motivy:
        <input type="text"
               name="motiv"
        </p>

	<script>
	    function togglePrvoslova() {
		    var section = document.getElementById("prvoslova")
		    var button = document.getElementById("prvoslovaButton")
		    if (section.style.display === "none") {
			    section.style.display = "block";  // Show the section
                            button.textContent = "➖ Skrýt první slova veršů";
			} else {
			    section.style.display = "none";   // Hide the section
			    button.textContent = "➕ První slova veršů";
			}
		    }
	</script>

	<button type="button" data-hide-models="new" id="prvoslovaButton" onclick="togglePrvoslova()">➕ První slova veršů</button>
	<div id="prvoslova" data-hide-models="new">
	<p>Lze vypnit jen první slovo prvního verše, anebo i první slova dalších
        veršů...
        </p>
        <ol>
        <li><input type="text"
               id="fw0"
               name="first_words"
               placeholder="Muž"
        >
	<span data-hide-models="new,gpt-4o-mini,gpt-5-mini">
        <input type="checkbox" name="anaphors" value="0"  disabled="disabled"> anafora
        <input type="checkbox" name="epanastrophes" value="0"  disabled="disabled"> epanastrofa
	</span>
        <button type="button" onclick="document.getElementById('fw0').value=getRandomNoun()">Náhodné slovo</button>

        <li><input type="text"
               id="fw1"
               name="first_words"
               placeholder="Žena"
        >
	<span data-hide-models="new,gpt-4o-mini,gpt-5-mini">
        <input type="checkbox" name="anaphors" value="1"> anafora
        <input type="checkbox" name="epanastrophes" value="1"> epanastrofa
	</span>
        <button type="button" onclick="document.getElementById('fw1').value=getRandomNoun()">Náhodné slovo</button>
        
        <li><input type="text"
               id="fw2"
               name="first_words"
               placeholder="Banán"
        >
	<span data-hide-models="new,gpt-4o-mini,gpt-5-mini">
        <input type="checkbox" name="anaphors" value="2"> anafora
        <input type="checkbox" name="epanastrophes" value="2"> epanastrofa
	</span>
        <button type="button" onclick="document.getElementById('fw2').value=getRandomNoun()">Náhodné slovo</button>
        
        <li><input type="text"
               id="fw3"
               name="first_words"
               placeholder="Mušle"
        >
	<span data-hide-models="new,gpt-4o-mini,gpt-5-mini">
        <input type="checkbox" name="anaphors" value="3"> anafora
        <input type="checkbox" name="epanastrophes" value="3"> epanastrofa
	</span>
        <button type="button" onclick="document.getElementById('fw3').value=getRandomNoun()">Náhodné slovo</button>
        
        <li><input type="text"
               id="fw4"
               name="first_words"
               placeholder="Lanýž"
        >
	<span data-hide-models="new,gpt-4o-mini,gpt-5-mini">
        <input type="checkbox" name="anaphors" value="4"> anafora
        <input type="checkbox" name="epanastrophes" value="4"> epanastrofa
	</span>
        <button type="button" onclick="document.getElementById('fw4').value=getRandomNoun()">Náhodné slovo</button>
        
        <li><input type="text"
               id="fw5"
               name="first_words"
               placeholder="Hrob"
        >
	<span data-hide-models="new,gpt-4o-mini,gpt-5-mini">
        <input type="checkbox" name="anaphors" value="5"> anafora
        <input type="checkbox" name="epanastrophes" value="5"> epanastrofa
	</span>
        <button type="button" onclick="document.getElementById('fw5').value=getRandomNoun()">Náhodné slovo</button>
        
        </ol>
	</div>


        <!--<p>Typ lyriky:
        <select name="lyrika_style" disabled>
        <option value="">ne</option>
        <option value="přírodní">přírodní</option>
        <option value="milostná">milostná</option>
        </select>
        </p>

        <p>Lyrický subjekt (rod, stáří, pocit...):
        <select name="lyrika_subjekt" disabled>
        <option value="">neurčeno</option>
        <option value="muž">muž</option>
        <option value="žena">žena</option>
        </select>
        
        </p>

        <p>Styl autora:
        <select name="author_style" disabled>
        <option value="">ne</option>
        <option value="Mácha">Mácha</option>
        </select>
        </p>

        <p>Styl školy:
        <select name="school_style" disabled>
        <option value="">ne</option>
        <option value="ruchovci">ruchovci</option>
        </select>
        </p>-->

        <p data-hide-models="gpt-5-mini">Temperature: <input type="number" name="temperature" value="0.7" step="0.01" min="0.01" max="10">
        Jak moc konzervativní/divoký bude model.
        Čím vyšší teplota, tím náhodnější jsou výstupy modelu.
        Pro nový model nám dobře fungují hodnoty kolem 0.7,
        pro ChatGPT 4 kolem 0.5
        (pro ChatGPT 5 se temperature ignoruje).
        </p>

        <p data-hide-models="new">Počet slok:
        <input type="number" name="max_strophes" value="1" step="1" min="1" max="10">
        Maximální počet slok - model může vygenerovat kratší báseň.
        Delší básně jsou zajímavější, ale jejich generování trvá déle.
        </p>

        <p>Počet pokusů:
        <input type="number" name="max_tries" value="1" step="1" min="1" max="10">
        Maximální počet pokusů o vygenerování dobré básně.
        Model se opakovaně snaží vygenerovat báseň, která má smyslupnost
        alespoň
        <input type="number" name="min_meaning" value="0.7" step="0.1" min="0" max="1">
        a podíl neznámých slov nejvýše
        <input type="number" name="max_unk" value="0.05" step="0.01" min="0" max="1">
        Pokud se to na daný počet pokusů nezdaří, model vrátí nejlepší z
        vygenerovaných básní dle těchto kritérií.
        Vyšší počet pokusů vede k lepším básním, ale déle trvajícímu
        generování.
        </p>

        <input type="submit" value="Generovat" title="Generovat"
        onclick="this.value='Generuji...'; this.disabled = true; this.form.submit();">
    </form>

    <script>togglePrvoslova()</script>
    <script>updateModelVisibility()</script>
